-- 1. Creation de la base de données.

CREATE DATABASE Instagram;

-- 2. Utiliser/sélectionner une base de données.
USE Instagram;



CREATE TABLE IF NOT EXISTS Utilisateur  (
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    nom VARCHAR(50) NOT NULL,
    prenom VARCHAR(50) NOT NULL,
    username VARCHAR(50) NOT NULL,
    adresse_email VARCHAR(50) NOT NULL UNIQUE,
    avatar VARCHAR(100) NOT NULL 
);

CREATE TABLE IF NOT EXISTS Photos  (
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    url_image VARCHAR (100) NOT NULL,
    id_user INT,
    FOREIGN KEY (id_user) REFERENCES utilisateur(id) ON UPDATE CASCADE ON DELETE CASCADE
    
);

CREATE TABLE IF NOT EXISTS Likes (
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    id_photo INT,
    id_user INT,

    FOREIGN key (id_photo) REFERENCES Photos(id) ON UPDATE CASCADE ON DELETE CASCADE,
    FOREIGN KEY (id_user) REFERENCES utilisateur(id) ON UPDATE CASCADE ON DELETE SET NULL    
);

CREATE TABLE IF NOT EXISTS Commentaire (
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    id_photo INT,
    id_user INT,

    FOREIGN key (id_photo) REFERENCES Photos(id) ON UPDATE CASCADE ON DELETE CASCADE,
    FOREIGN KEY (id_user) REFERENCES utilisateur(id) ON UPDATE CASCADE ON DELETE CASCADE, 
    contenu VARCHAR (100)
);
